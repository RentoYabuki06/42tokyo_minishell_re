# 42tokyo minishell

![minishell](https://img.shields.io/badge/Project-minishell-blue)

`minishell` は、bashの基本的な機能を再現するシェルの実装です。このプロジェクトでは、プロセス作成、ファイル操作、シグナルハンドリングなどのUNIXシステムコールを使用して、独自のシェルインタープリタを開発しています。

## 目次
1. 機能
2. コンパイル方法
3. 使用方法
4. サポートされているコマンド
5. プロジェクト構造
6. テスト

## 機能

- コマンド実行（外部コマンドとビルトインコマンド）
- パイプ (`|`) を使用した複数コマンドの連結
- リダイレクション (`>`, `>>`, `<`) 
- ヒアドキュメント (`<<`)
- 環境変数の管理と展開（`$VAR`）
- シグナルハンドリング（Ctrl+C, Ctrl+D, Ctrl+\）
- 相対パスと絶対パスの処理
- クォーテーション処理（シングルクォート `'`、ダブルクォート `"`）

## コンパイル方法

リポジトリをクローンした後、以下のコマンドを実行してください：

```bash
make
```

## 使用方法

コンパイル後、以下のコマンドでminishellを起動できます：

```bash
./minishell
```

プロンプト `minishell$` が表示され、コマンドを入力できるようになります。

また、`-c` オプションを使用して、直接コマンドを実行することもできます：

```bash
./minishell -c "echo hello world"
```

## サポートされているコマンド

### ビルトインコマンド

- `echo` - 文字列を表示（`-n` オプション対応）
- `cd` - カレントディレクトリを変更
- `pwd` - 現在のディレクトリを表示
- `export` - 環境変数を設定
- `unset` - 環境変数を削除
- `env` - 環境変数を表示
- `exit` - シェルを終了

### その他の機能

- **パイプ**: `cmd1 | cmd2`
- **リダイレクション**:
  - 出力: `cmd > file`, `cmd >> file`
  - 入力: `cmd < file`
  - ヒアドキュメント: `cmd << DELIMITER`
- **環境変数の展開**: `$VAR`, `$?`（直前のコマンドの終了ステータス）
- **クォーテーション処理**:
  - シングルクォート (`'`): 全ての特殊文字をリテラルとして扱う
  - ダブルクォート (`"`): 変数展開を許可する
  - エスケープシーケンス: `$'...'` 構文で特殊文字対応

## プロジェクト構造

```
.
├── includes/
│   └── minishell.h     # メインヘッダファイル
├── srcs/
│   ├── builtins/       # ビルトインコマンドの実装
│   ├── executor/       # コマンド実行関連
│   ├── gnl/            # get_next_line実装
│   ├── libft/          # 標準ライブラリ関数の再実装
│   ├── parser/         # 入力解析とトークン化
│   ├── signals/        # シグナルハンドリング
│   ├── utils/          # ユーティリティ関数
│   └── main.c          # メインエントリポイント
└── minishell_tester/   # 自動テストスイート
```

## テスト

テスト実行用のスクリプトが含まれています：

```bash
# 基本テストを実行
./mytester.sh

# Tester suiteを使用した詳細テスト
cd minishell_tester
./tester
```

特定のテストカテゴリのみを実行するには：

```bash
./minishell_tester/tester builtins
./minishell_tester/tester pipes
./minishell_tester/tester redirects
./minishell_tester/tester extras
```

メモリリークをチェックするには（valgrindを使用）：

```bash
./vshell
```

---

このプロジェクトは、Unix系システムのシェルの動作を理解し、プロセス制御、ファイル操作、シグナルハンドリングなどの低レベルシステムコールを学ぶための教育的なプロジェクトです。